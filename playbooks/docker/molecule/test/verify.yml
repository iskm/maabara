---
- name: Verify
  hosts: all
  # We disable gather facts because it would fail due to our container not
  # having python installed. This will not prevent use from running 'raw'
  # commands. Most molecule users are expected to use containers that already
  # have python installed in order to avoid notable delays installing it.
  gather_facts: false
  tasks:
    - name: Check docker
      ansible.builtin.command:
        cmd: docker --version
      register: result
      changed_when: false

    - name: print results
      ansible.builtin.debug:
        var: result.stdout

    - name: Print some info
      ansible.builtin.assert:
        that: result.stdout is ansible.builtin.search("^Docker")

    - name: Check pip
      ansible.builtin.command:
        cmd: pip --version
      register: result
      changed_when: false

    - name: print results
      ansible.builtin.debug:
        var: result.stdout

    - name: Print some info
      ansible.builtin.assert:
        that: result.stdout is ansible.builtin.search("^pip")
